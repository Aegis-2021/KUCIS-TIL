# KUCIS TIL

- 이름: 전호영

- 날짜: 21-07-27

### ⚙️ 오늘 공부한 내용

etc

JavaScript 표준을 위한 움직임: CommonJS와 AMD

([https://d2.naver.com/helloworld/12864](https://d2.naver.com/helloworld/12864))

1. node js

   ```jsx
   const handleHome = (req, res) => res.end(); // 종료 응답.
   app.get("/", handleHome);
   ```

   handleHome = handler는 req와 res를 갖고 있다.

   → req, res는 express가 주는 것.

   - req = 누구의 요청, 쿠키, 브라우저 정보, ip 주소 등..
   - res = response하기 위한 function.무조건 응답해줘야함!!!!([https://expressjs.com/ko/4x/api.html#res](https://expressjs.com/ko/4x/api.html#res))

     ex) res.send() 하면 ()안에 있는 값을 전달해줌.

   = req는 우리의 요청에 대한 정보, res는 요청에 어떻게 응답할 것인가

   route를 만들고, controller를 만드는게 핵심!

   - Middleware
     - request와 response 사이에 존재하는 software

```jsx
**// Middleware
const routerLogger = (req, res, next) => {
  return res.send("I'm in middle");
};
//Middleware
const methodLogger = (req, res, next) => {
  next();
};

const home = (req, res, (next)) => res.send("<h1>hello!</h1>");
/*관습적으로 마지막 controller에는 next를 안써줌.*/
app.get("/", methodLogger, routerLogger, home);**
```

이런 경우에 home의 res까지 가지 못하고, routerLogger에서 끝남.

middleware의 갯수 제한 없음.

= 누군가 응답하기 전까지 request에 관한 controller는 모두 middleware!

```jsx
// Middleware
const routerLogger = (req, res, next) => {
  console.log("PATH", req.path);
  next();
};
//Middleware
const methodLogger = (req, res, next) => {
  console.log("METHOD", req.method);
  next();
};

const home = (req, res) => {
  console.log("I will respond");
  return res.send("<h1>hello!</h1>");
};

const login = (req, res) => {
  return res.send("login");
};
app.use(methodLogger, routerLogger); // middleware의 중복 방지. 이렇게 쓰면 아래에는 전부 middleware가 쓰임.
app.get("/", home);
app.get("/login", login);
```

app.use가 가장 위에 있어야함!!

만약

```jsx
app.get("/", home);
app.use(methodLogger, routerLogger);
app.get("/login", login);
```

이러면, login에만 middleware가 적용됨.

- morgan (npm i morgan)

  - node.js용 request logger middleware.
  - import logger from "morgan";

    → 이름은 상관없음. 원하는대로 지을 수 있다.

  - morgan 은 middleware를 return해준다.

```jsx
import morgan from "morgan";
const morganMiddleware = morgan("dev");
app.use(morganMiddleware); // middleware를 쓰는 방식과 동일.
```

morgan("dev")가 주는 정보

→

![스크린샷 2021-07-27 오후 3 29 50](https://user-images.githubusercontent.com/78394999/127174951-5577af19-c298-47e0-b567-877c748c209a.png)

그냥 middleware랑 동일함.

- Router

→ 라우터 만들기 + 사용하기!

```jsx
const globalRouter = express.Router();
const handleHome = (req, res) => res.send("home");
globalRouter.get("/", handleHome);

const userRouter = express.Router();
const handleEditUser = (req, res) => res.send("Edit user");
userRouter.get("/edit", handleEditUser);

const videoRouter = express.Router();
const handleWatchVideo = (req, res) => res.send("Watch Video");
videoRouter.get("/watch", handleWatchVideo);

app.use("/videos", videoRouter);
app.use("/users", userRouter);
app.use("/", globalRouter);
```

→ 만약 /videos로 시작하는 라우터에 url로 접근하면, videoRouter 안에 있는 라우터를 찾아간다.

- node JS에선 모든 파일이 모듈이다! 전부 독립! ([https://d2.naver.com/helloworld/12864](https://d2.naver.com/helloworld/12864))
- export default로 export할 경우, import할 때 이름을 바꿀 수 있다.

```jsx
...
export default globalRouter;
--------------------------------
import globalRouter from "./~";
import global from "./~";
둘다 같은 의미가 됨.
```

- Router 와 Controller는 서로 분리되어야 한다!
- export default vs export

  - export default

    ⇒한 파일에 하나만 할 수 있다.

    ⇒ 한 파일에 하나만 익스포트 할 수 있으므로 이름이 자유로움

    ```jsx
    import sth from "./file" 의 형태
    ```

  - export

    ⇒한 파일이 여러개를 익스포트 할 수 있다.

    ⇒ 한 파일이 여러개를 익스포트 하고 있으므로, 이름은 정의된 그대로 써줘야 함.

    ```jsx
    import {sth} from "./file" 의 형태
    ```

- router = 공통 시작부분을 기반으로 url을 독립적으로 관리하기 위해 사용한다.

2. 웹 해킹

- 커맨드 인젝션 공격

  - 웹을 통해 시스템 명령어를 실행하는 공격.
  - 웹 내부에서 시스템 명령어를 실행하는 경우, 입력 값을 제대로 검사하지 않으면, 해커 마음대로 시스템 명령어를 실행할 수 있다.

  cf) ping = IP주소를 가진 시스템이 현재 동작하고 있는지 확인하는 명령어.

![Untitled](https://user-images.githubusercontent.com/78394999/127175032-dcb1044b-090d-4bf2-b313-acba6290492a.png)

; cat/etc/psswd ⇒ 리눅스의 사용자 목록을 확인할 때 사용하는 명령어.

해커가 보낸 IP 주소 뒤에 명령어가 있는지를 제대로 검사하지 않으면 , 해커가 보낸 명령어를 실행하게 됨.

;가 있으면, 리눅스는 두 개의 명령어를 모두 실행하게 됨.

3. 디자인 괜찮은 사이트

- 라온 솔루션(it 보안)

[https://www.raoncorp.com/ko/main](https://www.raoncorp.com/ko/main)

- 안랩

[https://global.ahnlab.com/site/main.dohttps://global.ahnlab.com/site/main.do](https://global.ahnlab.com/site/main.do)

- 리움 스토어(미술관)

[https://leeumstore.com/](https://leeumstore.com/)

- 하이브 인사이트(음악?)

[https://hybeinsight.com/](https://hybeinsight.com/)

### ⚙️ 회고

- 여행 포트폴리오? 기록? 사이트 react + TS로 만들어보기
- 커맨드 인젝션 공부
